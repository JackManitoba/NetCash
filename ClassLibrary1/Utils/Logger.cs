using Helpers.Interceptor_Package;
using System;
using System.Diagnostics;
using System.IO;

namespace Helpers.Utils
{
    class Logger
    {
        
        
        public Logger()
        {

        }

        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        internal void logDatabaseInteractions(ContextObject context)
        {
            //file2.WriteLine(DateTime.Now.ToString("HH:mm:ss tt")+context.getObj());
            var path = (AppDomain.CurrentDomain.BaseDirectory);
            int position = path.IndexOf("NetCash");
            var substring = path.Substring(0, position);
            path = substring + "NetCash\\logs\\DatabaseInteractionsLog.txt";

            if (!File.Exists(path))
            {
                string createText = context.getVerboseDescription() + Environment.NewLine;
                File.WriteAllText(path, createText);
            }
            else
            {
                string appendText = context.getVerboseDescription() + Environment.NewLine;
                File.AppendAllText(path, appendText);
            }
        }

        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


        internal void logAccountTransactions(ContextObject context)
        {
            TransactionInfo t = (TransactionInfo)context;

            var path = (AppDomain.CurrentDomain.BaseDirectory);
            int position = path.IndexOf("NetCash");
            var substring = path.Substring(0, position);
            path = substring + "NetCash\\logs\\TransactionsLog";

            path = path + t.getAccountNumber().Trim() + ".txt";
            if (!File.Exists(path))
            {
                string createText = context.getVerboseDescription() + Environment.NewLine;
                File.WriteAllText(path, createText);
            }
            else
            {
                string appendText = context.getVerboseDescription() + Environment.NewLine;
                File.AppendAllText(path, appendText);
            }
        }

        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    }
}

